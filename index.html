<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Texte √† d√©couvrir (accents g√©r√©s)</title>

    <!-- Bootstrap (pour mobile) -->
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    >

    <style>
        #texte {
            font-size: 1.2rem;
            white-space: pre-wrap;
            letter-spacing: 1.5px;
        }
    </style>
</head>
<body class="p-3">

    <h3 class="text-center mb-3">Texte √† d√©couvrir</h3>

    <div id="texte" class="border rounded p-3 mb-3"></div>

    <button class="btn btn-primary w-100" onclick="demanderLettre()">
        Entrer une lettre
    </button>

    <script>
        // Ton texte secret
        const messageSecret = "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Optio consectetur aperiam atque eaque ipsum sed! Doloribus tenetur et molestiae sed nesciunt dolorum error aperiam placeat? Optio veniam cum vel officiis."

        // Renvoie la lettre de base (sans accents)
        function baseLetter(char) {
            if (!char) return char;
            return char.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toUpperCase();
        }

        // D√©tecte si un caract√®re est une lettre
        function estLettreChar(char) {
            return /[A-Za-z√Ä-√ñ√ò-√∂√∏-√ø≈í≈ì]/.test(char);
        }

        // Afficher le texte masqu√©
        function afficherTexte() {
            let lettresDebloquees = JSON.parse(localStorage.getItem("lettresDebloquees")) || [];
            lettresDebloquees = lettresDebloquees.map(l => baseLetter(l));

            let resultat = "";

            for (let char of messageSecret) {
                if (estLettreChar(char)) {
                    const base = baseLetter(char);
                    if (!lettresDebloquees.includes(base)) {
                        resultat += "_";
                        continue;
                    }
                }
                resultat += char;
            }

            document.getElementById("texte").innerText = resultat;
        }

        // Entr√©e d'une lettre par l'utilisateur
        function demanderLettre() {
        let lettre = prompt("Entre une lettre :");
        if (!lettre) return;

            lettre = lettre.trim().charAt(0);
            if (!lettre) return;

            const base = baseLetter(lettre);

                if (!estLettreChar(base)) {
                    alert("Veuillez entrer une lettre valide.");
                    return;
                }  

            // üîí Limite : 1 lettre par jour
            const aujourdHui = new Date().toISOString().slice(0, 10);
            const derniereDate = localStorage.getItem("dernierDeblocage");

                if (derniereDate === aujourdHui) {
                    alert("Vous avez d√©j√† d√©bloqu√© une lettre aujourd'hui. Revenez demain !");
                    return;
        }

    let lettresDebloquees = JSON.parse(localStorage.getItem("lettresDebloquees")) || [];

    if (!lettresDebloquees.map(l => baseLetter(l)).includes(base)) {
        lettresDebloquees.push(base);
        localStorage.setItem("lettresDebloquees", JSON.stringify(lettresDebloquees));

        // Mise √† jour de la date du dernier d√©blocage
        localStorage.setItem("dernierDeblocage", aujourdHui);
    }

    afficherTexte();
}
document.addEventListener('mousemove', function(e) {

    // Liste d'emoji disponibles
    const emojis = ["‚ù§Ô∏è", "üíñ", "üíò", "üíï", "üíì", "üíó", "üíú", "üíô", "üíö", "üíõ"];

    // Choisir un emoji au hasard
    const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];

    // Cr√©ation de l'√©l√©ment
    const heart = document.createElement('div');
    heart.innerHTML = randomEmoji;
    
    // Style
    heart.style.position = 'absolute';
    heart.style.left = e.pageX + 'px';
    heart.style.top = e.pageY + 'px';
    heart.style.pointerEvents = 'none';
    heart.style.opacity = '1';
    heart.style.fontSize = "25px";  // taille de l'emoji
    heart.style.transition = 'opacity 0.5s ease-out';

    // Ajout dans la page
    document.body.appendChild(heart);

    // Animation disparition
    setTimeout(() => {
        heart.style.opacity = '0';
    }, 10);

    // Suppression du c≈ìur
    setTimeout(() => {
        heart.remove();
    }, 500);
});
        // ---------- IMPORTANT ----------
        // R√©initialiser : d√©marrage avec 0 lettres
        localStorage.removeItem("lettresDebloquees");

        // Affichage initial
        afficherTexte();
    </script>
</body>
</html>
